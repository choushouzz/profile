(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{112:function(e,t,a){e.exports=a(138)},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),o=a.n(i),s=(a(117),a(6)),l=a(7),c=a(9),u=a(8),m=a(43),d=a(26),p=(a(118),a(167)),h=(a(119),a(120),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("img",{style:{display:"block",margin:"auto",maxWidth:"30%"},src:"/static/logo.png"}))}}]),a}(r.a.Component)),g=a(178),f=a(168),v=a(176),y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).validateAndSubmit=function(e){e.preventDefault(),n.form.current.reportValidity()&&n.props.login(n.state.username,n.state.password,n.props.isAdmin)},n.state={username:"",password:""},n.form=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"buttons center"},r.a.createElement("form",{ref:this.form,onSubmit:this.validateAndSubmit},r.a.createElement(g.a,{value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",type:"text"}),r.a.createElement(g.a,{value:this.state.pwd,onChange:function(t){return e.setState({password:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),this.props.invalidLogin&&r.a.createElement(v.a,{severity:"error"},this.props.loginMsg),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained"},"Sign in"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(p.a,{className:"center_link",onClick:this.props.goBack},"Back to home page")),!this.props.isAdmin&&r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(p.a,{className:"center_link",onClick:this.props.register},"Don't have an account?",r.a.createElement("br",null),"Sign Up!")))))}}]),a}(r.a.Component),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).validateAndSubmit=function(e){e.preventDefault(),n.form.current.reportValidity()&&(n.state.pwd==n.state.pwdConfirm?(console.log(n.state),n.props.register(n.state.email,n.state.pwd,n.state.firstName,n.state.lastName,n.state.isAdmin)):n.setState({passwordsMatch:!1}))},n.state={firstName:"",lastName:"",email:"",pwd:"",pwdConfirm:"",passwordsMatch:!0,isAdmin:!1},n.form=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"buttons center"},r.a.createElement("form",{ref:this.form,onSubmit:this.validateAndSubmit},r.a.createElement(g.a,{value:this.state.firstName,onChange:function(t){return e.setState({firstName:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",type:"name",autoComplete:"firstName",autoFocus:!0}),r.a.createElement(g.a,{value:this.state.lastName,onChange:function(t){return e.setState({lastName:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",type:"name",autoComplete:"lastName",autoFocus:!0}),r.a.createElement(g.a,{value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",type:"email",autoFocus:!0}),r.a.createElement(g.a,{value:this.state.pwd,onChange:function(t){return e.setState({pwd:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(g.a,{value:this.state.pwdConfirm,onChange:function(t){return e.setState({pwdConfirm:t.target.value})},variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"repeatpassword",label:"Confirm Password",type:"password",id:"repeatpassword",autoComplete:"current-password",helperText:this.state.passwordsMatch?"":"Does not match password",error:!this.state.passwordsMatch}),r.a.createElement(p.a,{type:"submit",fullWidth:!0,variant:"contained"},"Submit"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(p.a,{fullWidth:!0,onClick:this.props.goBack},"Go Back")))))}}]),a}(r.a.Component);function E(e){return r.a.createElement("div",{className:"buttons center"},r.a.createElement(p.a,{className:"block newRequestButton login__button",onClick:function(){return e.clickHandler(!1)},variant:"contained",size:"large",style:{display:"block",marginLeft:"auto",marginRight:"auto",marginTop:"10%"}},"Create New Ramp Request",r.a.createElement("br",null),"Or",r.a.createElement("br",null),"Check Status of Existing Ramp Request"),r.a.createElement(p.a,{className:"block login__button",onClick:function(){return e.clickHandler(!0)}},"Admin",r.a.createElement("br",null),"(StopGap Staff Only)"))}var S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={inLoginForm:!1,inRegisterForm:!1,isAdmin:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return this.props.loggedIn?r.a.createElement(d.Redirect,{to:"/dashboard"}):r.a.createElement("div",{className:"login__bg-image center"},r.a.createElement(h,null),this.state.inLoginForm?this.state.inRegisterForm?r.a.createElement(b,{register:this.props.register,goBack:function(){return e.setState({inRegisterForm:!1})}}):r.a.createElement(y,{username:this.props.username,login:this.props.login,register:function(){return e.setState({inRegisterForm:!0})},isAdmin:this.state.isAdmin,goBack:function(){e.setState({inLoginForm:!1}),e.props.logout()},invalidLogin:this.state.inLoginForm&&this.props.invalidLogin,loginMsg:this.state.inLoginForm?this.props.loginMsg:""}):r.a.createElement(E,{clickHandler:function(t){return e.setState({inLoginForm:!0,isAdmin:t})}}))}}]),a}(r.a.Component),k=a(77),w=(a(89),a(126),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:3},r.a.createElement("span",{className:"navTitle"},r.a.createElement("h3",null,r.a.createElement("b",null,this.props.title)))),r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement("span",null,r.a.createElement("img",{className:"center",style:{display:"block",margin:"auto",width:300,height:100},src:"/static/logo.png"}))),r.a.createElement(f.a,{item:!0,xs:3},r.a.createElement(p.a,{style:{margin:"10px 5px"},color:"secondary",variant:"contained",onClick:this.props.logout},"Log Out"),this.props.stackSize>0&&r.a.createElement(p.a,{style:{margin:"10px 5px"},variant:"contained",onClick:this.props.goBack},"Go Back"))))}}]),a}(r.a.Component)),O=(a(90),a(169)),j=(a(127),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.listing,a=e.click;return r.a.createElement(p.a,{className:"listing_button",onClick:a},r.a.createElement(f.a,{container:!0,spacing:4},r.a.createElement(f.a,{item:!0,xs:!0},t.pk," "),r.a.createElement(f.a,{item:!0,xs:!0},"".concat(t.first_name," ").concat(t.last_name)),r.a.createElement(f.a,{item:!0,xs:!0},t.company," "),r.a.createElement(f.a,{item:!0,xs:!0},["Request Recieved","Request Accepted","Build Phase","Paint Phase","Out for Delivery","Completed"][t.status]," ")))}}]),a}(r.a.Component)),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({listingFilter:e.target.value}),n.props.onChange(e.target.value)},n.state={listingFilter:""},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,{id:"filled-basic",label:"Filter Client by Full Name",variant:"filled",defaultValue:"",onChange:this.handleChange})}}]),a}(r.a.Component),N=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).filterListings=function(e){e=e.toLowerCase();var t=n.props.orders;t=t.filter((function(t){return"".concat(t.first_name," ").concat(t.last_name).toLowerCase().includes(e)})),n.setState({filteredListings:t})},n.state={filteredListings:[],error:null,Loaded:!1},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){this.setState({filteredListings:this.props.orders})}},{key:"render",value:function(){var e=this.state,t=e.filteredListings,a=e.error,n=e.Loaded,i=this.props.click,o=this.props.isLoaded;return a?r.a.createElement("div",{className:"block"}," Error: ",a.message):o?(o&&!n&&this.setState({filteredListings:this.props.orders,Loaded:!0}),r.a.createElement("div",{className:"listing_box block"},r.a.createElement("h2",{className:"block-title"},"Ramp Requests"),this.props.isAdmin&&r.a.createElement(C,{onChange:this.filterListings}),r.a.createElement(f.a,{container:!0,spacing:4},r.a.createElement(f.a,{align:"center",item:!0,xs:!0},"Order Number"),r.a.createElement(f.a,{align:"center",item:!0,xs:!0},"Full Name"),r.a.createElement(f.a,{align:"center",item:!0,xs:!0},"Company"),r.a.createElement(f.a,{align:"center",item:!0,xs:!0},"Status")),t.map((function(e,t){return r.a.createElement(j,{listing:e,key:t,click:function(t){t.preventDefault(),i(e)}})})))):r.a.createElement(O.a,{className:"block",variant:"rect",height:220})}}]),a}(r.a.Component);function x(e){return r.a.createElement("div",{className:"number-stat block"},r.a.createElement("h2",{className:"block-title"},e.title),r.a.createElement("span",{className:"number-stat-num"},e.stat))}var L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,orders:[]},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=this;console.log("wow"),console.log(typeof this.props.verifyTokens()),this.props.verifyTokens().then((function(t){console.log(t),t&&fetch("/order-information/",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token-access"))}}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong with error code ".concat(e.status))})).then((function(t){var a=t.results;e.setState({isLoaded:!0,orders:a})}),(function(t){e.setState({isLoaded:!0,error:t})}))}))}},{key:"render",value:function(){var e=this,t=this.props.gotoFuncs,a=this.state,n=a.orders,i=a.isLoaded,o=n.length,s=0,l=0,c=0,u=0;if(i)for(var m=0;m<o;m++){var d=n[m].status;2==d&&s++,3==d&&l++,4==d&&c++,5==d&&u++}return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,justify:"center"},r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x,{title:"Total Requests",stat:o})),r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x,{title:"Ready For Build",stat:s})),r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x,{title:"Ready For Paint",stat:l})),r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x,{title:"Out for Delivery",stat:c})),r.a.createElement(f.a,{item:!0,xs:!0},r.a.createElement(x,{title:"Completed Ramps",stat:u}))),i&&r.a.createElement(N,{click:function(a){return t.ramp_info(!0,a,e.props.verifyTokens)},orders:n,isAdmin:this.props.isAdmin,isLoaded:i}))}}]),a}(r.a.Component),I=a(95),P=a.n(I),R=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,userisLoaded:!1,orders:[],users:[],username:localStorage.getItem("username")||""},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.props.verifyTokens().then((function(t){t&&(fetch("/users",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token-access"))}}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong with error code ".concat(e.status))})).then((function(t){var a=t.results;e.handleUser(a)}),(function(t){e.setState({isLoaded:!0,error:t})})),e.state.isLoaded&&!e.state.userisLoaded&&e.handleUser())}))}},{key:"handleUser",value:function(e){var t=this;this.props.verifyTokens().then((function(a){a&&fetch("/order-information/",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token-access"))}}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong with error code ".concat(e.status))})).then((function(a){var n=a.results,r=e.find((function(e){return e.username==t.state.username}));if(r){var i=n.filter((function(e){return e.user==r.pk}));t.setState({isLoaded:!0,userisLoaded:!0,orders:i})}else t.setState({isLoaded:!0,error:"User not found."})}),(function(e){t.setState({userisLoaded:!0,error:e})}))}))}},{key:"render",value:function(){var e=this,t=this.props.gotoFuncs,a=this.state.orders,n=this.state.userisLoaded;return r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},"Welcome to StopGap!"),r.a.createElement(P.a,{to:"/form"},r.a.createElement(p.a,{className:"newRequestButton",color:"primary",variant:"contained",size:"large",style:{display:"block",marginLeft:"auto",marginRight:"auto",marginTop:"10%"}},"Create New Ramp Request")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N,{click:function(a){return t.ramp_info(!1,a,e.props.verifyTokens)},orders:a,isAdmin:this.props.isAdmin,isLoaded:n}))}}]),a}(r.a.Component),A=a(55);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var _=r.a.createElement("defs",null,r.a.createElement("path",{d:"M2.91 97.63L121.09 97.63L42.62 26.37L2.91 26.37L2.91 97.63Z",id:"b3qLKDWjhK"}),r.a.createElement("path",{d:"M81.85 97.63L2.91 26.37",id:"c6oEPMuhN"}),r.a.createElement("path",{d:"M0.57 100L5.34 100L5.34 24L0.57 24L0.57 100Z",id:"aykloXu8q"})),B=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("use",{xlinkHref:"#b3qLKDWjhK",opacity:1,fillOpacity:0,stroke:"#000000",strokeWidth:5,strokeOpacity:1}))),r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("use",{xlinkHref:"#c6oEPMuhN",opacity:1,fillOpacity:0,stroke:"#000000",strokeWidth:5,strokeOpacity:1})))),r.a.createElement("g",null,r.a.createElement("use",{xlinkHref:"#aykloXu8q",opacity:1,fill:"#ff0000",fillOpacity:1})))),F=function(e){var t=e.svgRef,a=e.title,n=T(e,["svgRef","title"]);return r.a.createElement("svg",q({preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 128 128",width:128,height:128,ref:t},n),a?r.a.createElement("title",null,a):null,_,B)},W=r.a.forwardRef((function(e,t){return r.a.createElement(F,q({svgRef:t},e))}));a.p;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var z=r.a.createElement("defs",null,r.a.createElement("path",{d:"M125.66 97.63L7.49 97.63L85.96 26.37L125.66 26.37L125.66 97.63Z",id:"e6z75ZCptw"}),r.a.createElement("path",{d:"M46.72 97.63L125.66 26.37",id:"a16gI0sTqL"}),r.a.createElement("path",{d:"M128 100L123.23 100L123.23 24L128 24L128 100Z",id:"e4ZtRDWpx"})),H=r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("use",{xlinkHref:"#e6z75ZCptw",opacity:1,fillOpacity:0,stroke:"#000000",strokeWidth:5,strokeOpacity:1}))),r.a.createElement("g",null,r.a.createElement("g",null,r.a.createElement("use",{xlinkHref:"#a16gI0sTqL",opacity:1,fillOpacity:0,stroke:"#000000",strokeWidth:5,strokeOpacity:1})))),r.a.createElement("g",null,r.a.createElement("use",{xlinkHref:"#e4ZtRDWpx",opacity:1,fill:"#ff0000",fillOpacity:1})))),G=function(e){var t=e.svgRef,a=e.title,n=M(e,["svgRef","title"]);return r.a.createElement("svg",D({preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 128 128",width:128,height:128,ref:t},n),a?r.a.createElement("title",null,a):null,z,H)},V=r.a.forwardRef((function(e,t){return r.a.createElement(G,D({svgRef:t},e))})),J=(a.p,function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:{"Left Height":{value:"",icon:r.a.createElement(W,{style:{width:"24px",height:"auto"}})},"Right Height":{value:"",icon:r.a.createElement(V,{style:{width:"24px",height:"auto"}})},Color:{value:"",icon:null}},error:null,isLoaded:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({data:{"Left Height":{value:this.props.data.step_left_height,icon:r.a.createElement(W,{style:{width:"24px",height:"auto"}})},"Right Height":{value:this.props.data.step_right_height,icon:r.a.createElement(V,{style:{width:"24px",height:"auto"}})},Color:{value:this.props.data.ramp_colour,icon:null}},isLoaded:!0})}},{key:"render",value:function(){var e=this.state,t=(e.listings,e.error),a=e.isLoaded;return t?r.a.createElement("div",null," Error: ",t.message):a?r.a.createElement("div",{className:"block"},r.a.createElement(f.a,{container:!0,className:"ramp-dimensions"},r.a.createElement(f.a,{item:!0,xs:12},r.a.createElement("h2",{className:"block-title"},"Ramp Dimensions")),Object.entries(this.state.data).map((function(e,t){var a=e[0],n=e[1],i=n.value,o=n.icon;return r.a.createElement(f.a,{container:!0,className:"kv",key:t},r.a.createElement(f.a,{item:!0,xs:1,className:"kv-key"},o&&o),r.a.createElement(f.a,{item:!0,xs:5,className:"kv-key"},r.a.createElement("strong",null,a)),r.a.createElement(f.a,{item:!0,xs:6,className:"kv-value"},r.a.createElement("span",null,i)))})))):r.a.createElement("div",null,"Loading...")}}]),a}(r.a.Component));var U=function(e){return r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{className:"progress-bar-inner",style:{width:"".concat(100*e.progress,"%")}}))},Z=a(174),Y=a(181),K=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).statuses=["Request Recieved","Request Accepted","Build Phase","Paint Phase","Out for Delivery","Completed"],n.statuses[-1]="--",n.state={error:null,isLoaded:!1,date:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.statusState,a=t.statusInput,n=t.dirtyBit,i=this.statuses[a],o=a/(this.statuses.length-1);return r.a.createElement("div",{className:"block ".concat(n?"unsaved":"")},r.a.createElement("h2",{className:"block-title"},"Status"),r.a.createElement("span",{className:"status-block-last-updated"},"Initial Request Date: ",r.a.createElement("strong",null,this.props.date)),r.a.createElement(U,{progress:o}),r.a.createElement("span",{className:"status-block-status"},i,r.a.createElement("br",null)),this.props.isAdmin&&r.a.createElement(Z.a,{className:"status-bar-textfield",value:i,onChange:function(t){t.preventDefault(),console.log("change!"),e.props.handleStatusInput(e.statuses.indexOf(t.target.value))},type:"number",variant:"outlined"},this.statuses.map((function(e,t){return r.a.createElement(Y.a,{value:e,key:t},e)}))))}}]),a}(r.a.Component);function X(e){var t=e.note,a=t.dirtyBit,n=t.date,i=t.author,o=t.note;return r.a.createElement("div",{className:"note-block ".concat(a?"unsaved":""),style:{backgroundColor:e.color.bg}},r.a.createElement("p",{className:"note-block-metadata",style:{color:e.color.text}},r.a.createElement("span",{className:"note-block-date"},n)," by ",r.a.createElement("span",{className:"note-block-author"},i,a&&r.a.createElement("strong",null,"*"))),r.a.createElement("p",{className:"note-block-content",style:{color:e.color.text}},o))}var $=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n,r;Object(s.a)(this,a),(n=t.call(this,e)).saveNote=function(e){e.preventDefault()};try{r=JSON.parse(e.notes)}catch(i){r=[]}return n.state={notes:r,newNote:""},n}return Object(l.a)(a,[{key:"generateNoteColor",value:function(e){var t,a=0;for(t=0;t<e.length;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;var n=(16777215&a).toString(16).toUpperCase(),r=parseInt(n.slice(0,2),16)+parseInt(n.slice(2,4),16)+parseInt(n.slice(4,6),16);return{bg:"#"+"00000".substring(0,6-n.length)+n,text:r>=400?"#000000":"#ffffff"}}},{key:"render",value:function(){var e=this,t=this.props.noteState,a=t.newNote,n=t.notes,i=t.dirtyBit;return r.a.createElement("div",{className:"block fullwidth ".concat(i?"unsaved":"")},r.a.createElement("h2",{className:"block-title"},"Notes"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,md:9},r.a.createElement(g.a,{value:a,onChange:this.props.handleNewNoteInput,fullWidth:!0,variant:"outlined",label:"Create a New Note",type:"text",InputLabelProps:{shrink:!0}})),r.a.createElement(f.a,{item:!0,md:3,className:"horz-padding"},r.a.createElement(p.a,{className:"create-bttn",fullWidth:!0,variant:"contained",color:"primary",disabled:0==a.length,onClick:this.props.saveNote},"Create Note"))),r.a.createElement("div",{className:"notes-container"},n.map((function(t,a){return r.a.createElement(X,{note:t,color:e.generateNoteColor(t.author),key:a})}))))}}]),a}(r.a.Component),Q=a(180),ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(s.a)(this,a),n=t.call(this,e);var r=e.data;return n.state={data:{"Ramp #":{value:r.pk,options:[],clientEditable:!1,adminEditable:!1},"Client Name":{value:"".concat(r.first_name," ").concat(r.last_name),options:[],clientEditable:!1,adminEditable:!1},"Delivery Address":{value:r.shipping_address,options:[],clientEditable:!1,adminEditable:!1},"Billing Address":{value:r.billing_address,options:[],clientEditable:!1,adminEditable:!1},"Subsidy Info":{value:r.subsidize?"Subsidized":"Not Subsidized",options:["Subsidized","Not Subsidized"],clientEditable:!1,adminEditable:!1}}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=(Object(A.a)({},this.state.data),this.props.infoState.dirtyBit);return r.a.createElement("div",{className:"block ".concat(t?"unsaved":"")},r.a.createElement("h2",{className:"block-title"},"General Info"),r.a.createElement("div",{className:"general-info-container"},Object.entries(this.state.data).map((function(t,a){var n=t[0],i=t[1],o=i.value,s=i.options,l=i.clientEditable,c=i.adminEditable,u=e.props.isAdmin&&c||!e.props.isAdmin&&l;return r.a.createElement("div",null,r.a.createElement(Q.a,{id:"geninfo-select-".concat(a),shrink:!0},"".concat(n).concat(u?"":" (Read-Only)")),s.length>0?r.a.createElement(Z.a,{className:"general-info-input",labelId:"geninfo-select-".concat(a),key:a,defaultValue:o,fullWidth:!0,type:"text",variant:u?"outlined":"standard",InputProps:{readOnly:!u}},s.map((function(e){return u||e==o?r.a.createElement(Y.a,{value:e},e):null}))):r.a.createElement(g.a,{className:"general-info-input",labelId:"geninfo-select-".concat(a),key:a,defaultValue:o,fullWidth:!0,type:"text",variant:u?"outlined":"standard",InputProps:{readOnly:!u}}))}))))}}]),a}(r.a.Component),te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.galleryState,t=e.dirtyBit,a=e.leftSrc,n=e.entrySrc,i=e.rightSrc;return r.a.createElement("div",{className:"block ".concat(t?"unsaved":"")},r.a.createElement("h2",{className:"block-title"},"Photo Gallery"),r.a.createElement(f.a,{container:!0,spacing:1},r.a.createElement(f.a,{item:!0,xs:12,md:4},r.a.createElement("h3",{className:"center-text"},"Left Step Photo"),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("img",{alt:"left-step-photo",src:a,className:"center-block"}))),r.a.createElement(f.a,{item:!0,xs:12,md:4},r.a.createElement("h3",{className:"center-text"},"Entryway Photo"),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("img",{alt:"left-step-photo",src:n,className:"center-block"}))),r.a.createElement(f.a,{item:!0,xs:12,md:4},r.a.createElement("h3",{className:"center-text"},"Right Step Photo"),r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement("img",{alt:"left-step-photo",src:i,className:"center-block"})))))}}]),a}(r.a.Component),ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).overallDirtyBit=function(){return[n.state.noteState,n.state.statusState,n.state.infoState].some((function(e){return e.dirtyBit}))},n.saveChanges=function(e){e.preventDefault();var t={};if(Object.assign(t,n.props.data),n.state.noteState.dirtyBit){var a=n.state.noteState.notes.map((function(e){return{date:e.date,author:e.author,note:e.note}}));t.notes=JSON.stringify(a)}n.state.statusState.dirtyBit&&(t.status=JSON.stringify(n.state.statusState.statusInput)),n.props.verifyTokens().then((function(e){e&&fetch("/order-information/".concat(t.pk,"/"),{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token-access"))},body:JSON.stringify(t)}).then((function(e){e.json()})).then((function(e){console.log(e);var t={};Object.assign(t,n.state.noteState),t.dirtyBit=!1,t.notes=t.notes.map((function(e){return Object(A.a)({},e,{dirtyBit:!1})}));var a={};Object.assign(a,n.state.statusState),a.dirtyBit=!1;var r={};Object.assign(r,n.state.infoState),r.dirtyBit=!1,n.setState({noteState:t,statusState:a,infoState:r})})).catch((function(e){console.error("there was an error with saving changes!",e),console.error("request:",t)}))}))},n.handleNewNoteInput=function(e){e.preventDefault();var t={};Object.assign(t,n.state.noteState),t.newNote=e.target.value,n.setState({noteState:t})},n.saveNote=function(e){e.preventDefault();var t=new Date,a="".concat(["January","February","March","April","May","June","July","August","September","October","December"][t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear()),r=n.state.noteState.newNote,i={};Object.assign(i,n.state.noteState),i.newNote="",i.notes.push({date:a,author:localStorage.getItem("username"),note:r,dirtyBit:!0}),i.dirtyBit=!0,n.setState({noteState:i})},n.handleStatusInput=function(e){var t={};Object.assign(t,n.state.statusState),t.statusInput=e,t.dirtyBit=t.statusInput!=t.oldStatus,n.setState({statusState:t})},n.state={noteState:{newNote:"",notes:JSON.parse(e.data.notes).map((function(e){return Object(A.a)({},e,{dirtyBit:!1})})),dirtyBit:!1},statusState:{statusInput:parseInt(e.data.status),oldStatus:parseInt(e.data.status),dirtyBit:!1},infoState:{dirtyBit:!1},galleryState:{dirtyBit:!1,leftSrc:e.data.step_left_photo,entrySrc:e.data.entryway_photo,rightSrc:e.data.step_right_photo}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.isAdmin;return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:4},r.a.createElement(ee,{isAdmin:a,data:t,infoState:this.state.infoState})),r.a.createElement(f.a,{item:!0,container:!0,xs:8},r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(J,{data:t,isAdmin:a})),r.a.createElement(f.a,{item:!0,xs:6},r.a.createElement(K,{isAdmin:a,statusState:this.state.statusState,date:t.date_created,handleStatusInput:this.handleStatusInput}))),a&&r.a.createElement($,{noteState:this.state.noteState,saveNote:this.saveNote,handleNewNoteInput:this.handleNewNoteInput}))),r.a.createElement(te,{galleryState:this.state.galleryState}),a&&r.a.createElement(p.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:!this.overallDirtyBit(),onClick:this.saveChanges},"Save"))}}]),a}(r.a.Component),ne=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).pushToStack=function(e){var t=Object(k.a)(n.state.pageStack);t.push(e),n.setState({pageStack:t})},n.goBack=function(){var e=Object(k.a)(n.state.pageStack);e.pop(),n.setState({pageStack:e})},n.gotoFuncs={ramp_info:function(e,t,a){return n.pushToStack(r.a.createElement(ae,{goBack:n.goBack,data:t,isAdmin:e,verifyTokens:a}))}},n.state={pageStack:[],isLoaded:!1,error:null,isAdmin:localStorage.getItem("is-admin")||"false",username:localStorage.getItem("username")||"",users:[]},n}return Object(l.a)(a,[{key:"render",value:function(){return this.props.loggedIn?r.a.createElement("div",null,r.a.createElement(w,{title:"".concat("true"==this.state.isAdmin?"Admin":"Client"," Dashboard - ").concat(this.state.username),logout:this.props.logout,goBack:this.goBack,stackSize:this.state.pageStack.length}),r.a.createElement("div",{className:"content"},0==this.state.pageStack.length?"true"==this.state.isAdmin?r.a.createElement(L,{isAdmin:!0,logout:this.props.logout,verifyTokens:this.props.verifyTokens,gotoFuncs:this.gotoFuncs}):r.a.createElement(R,{isAdmin:!1,logout:this.props.logout,verifyTokens:this.props.verifyTokens,gotoFuncs:this.gotoFuncs}):this.state.pageStack[this.state.pageStack.length-1])):r.a.createElement(d.Redirect,{to:"/"})}}]),a}(r.a.Component),re=a(34),ie=a.n(re),oe=a(57),se=a(56),le=a(44),ce=a(70),ue=a.n(ce),me=a(171),de=a(177),pe=a(144),he=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).continue=function(e){e.preventDefault(),n.props.nextStep()},n.back=function(e){e.preventDefault(),n.props.prevStep()},n.form=r.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{position:"static",style:{background:"#2F4858",textAlign:"center"}},r.a.createElement(pe.a,{variant:"h5",style:{marginTop:"10px",marginBottom:"10px"}},"Ramp Request Form")),r.a.createElement("br",null),r.a.createElement("form",{ref:this.form,onSubmit:this.continue,style:{marginLeft:"7vh",marginTop:"5vh",marginRight:"20vh"}},r.a.createElement("h1",null,"Please Enter Your Information:"),r.a.createElement("div",{className:"formFields"},r.a.createElement(g.a,{required:!0,id:"standard-required",label:"First Name",defaultValue:"",onChange:this.props.handleChange("firstName"),style:{marginRight:"10px"}}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Last Name",defaultValue:"",onChange:this.props.handleChange("lastName")}))," ",r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Email",defaultValue:"",onChange:this.props.handleChange("email"),style:{marginRight:"10px"}}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Phone Number",defaultValue:"",onChange:this.props.handleChange("phoneNumber"),style:{marginRight:"10px"}}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Organization Name",defaultValue:"",onChange:this.props.handleChange("companyName"),style:{marginRight:"10px"}})),r.a.createElement("br",null),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Delivery Address",defaultValue:"",onChange:this.props.handleChange("deliveryAddress"),style:{marginRight:"10px"}}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Billing Address",defaultValue:"",onChange:this.props.handleChange("billingAddress"),style:{marginRight:"10px"}}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Delivery Type",defaultValue:"",onChange:this.props.handleChange("deliveryType"),style:{marginRight:"10px"}}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Ramp Color",defaultValue:"",onChange:this.props.handleChange("rampColor"),style:{marginRight:"10px"}}),r.a.createElement("label",null,r.a.createElement(de.a,{onClick:this.props.handleCheck("subsidize"),name:"check",style:{marginLeft:"40px"}}),r.a.createElement("span",null,"Subsidize")),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("div",{style:{margin:10}},r.a.createElement(p.a,{style:{right:10},color:"primary",variant:"contained",onClick:this.back},"Previous"),r.a.createElement(p.a,{type:"submit",color:"primary",variant:"contained"},"Next")),r.a.createElement("div",{style:{maxWidth:"65vh"}},r.a.createElement("h4",null,"*Please note that we\u2019re currently experiencing a bit of a backlog of ramp requests. We require all the info as mentioned above in order to send you a quote. Upon quote approval, there\u2019s typically an approximate 4-6 weeks turnover. We are so excited that our awareness raising efforts have worked but we\u2019re a very small team working hard at getting more ramps to more steps!")))))}}]),a}(n.Component),ge=a(96),fe=a.n(ge),ve=(a(137),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={pictures:[]},n.onDrop=n.onDrop.bind(Object(le.a)(n)),n}return Object(l.a)(a,[{key:"onDrop",value:function(){var e=Object(oe.a)(ie.a.mark((function e(t){var a,n,r,i,o;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({pictures:this.state.pictures.concat(t)}),a=t[0],(n=new FormData).append("file",a),n.append("upload_preset","kwjtygfq"),r=new Request("https://api.cloudinary.com/v1_1/stopgap-foundation/upload",{method:"POST",body:n}),e.next=8,fetch(r);case 8:return i=e.sent,e.next=11,i.json();case 11:o=e.sent,this.props.handlePicture(this.props.imageIdentifier,o.url);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{style:{display:"flex",border:"1px solid blue",width:310}},r.a.createElement("div",{style:{marginRight:"15px"}},r.a.createElement(fe.a,{withIcon:!1,withPreview:!0,label:"",buttonText:"Upload Images",onChange:function(t){return e.onDrop(t)},imgExtension:[".jpg",".gif",".png",".gif",".svg"],maxFileSize:9999999,fileSizeError:" file size is too big"})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}})))}}]),a}(r.a.Component)),ye=document.getElementById("root");o.a.render(r.a.createElement(ve,null),ye);var be=ve,Ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).continue=function(e){e.preventDefault(),n.props.Uploaded?n.props.nextStep():n.setState({show:!0})},n.back=function(e){e.preventDefault(),n.props.prevStep()},n.state={show:!1},n}return Object(l.a)(a,[{key:"render",value:function(){this.props.values;return r.a.createElement(ue.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{position:"static",style:{background:"#2F4858",textAlign:"center"}},r.a.createElement(pe.a,{variant:"h5",style:{marginTop:"10px",marginBottom:"10px"}},"Ramp Request Form")),r.a.createElement("div",{style:{marginLeft:"7vh",marginTop:"5vh",height:"100%"}},r.a.createElement("h1",null,"Upload Ramp Images:"),r.a.createElement("h3",null,"StopGap requires three images to process your ramp request."),r.a.createElement("form",{onSubmit:this.continue},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h4",null,"Photo of entire entryway"),r.a.createElement("div",{style:{maxWidth:"50vh"}},"Take a look at the entryway and envision the placement of the ramp. Take a picture of the entire entrance including the step in front of the doorway and the sidewalk. For a safe turning radius, you will need 42\u2033 of space in addition to the length of the ramp (which is 6 times the height of the step)."),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(be,{imageIdentifier:"entrywayPhoto",handlePicture:this.props.handlePicture,required:!0}))),r.a.createElement("li",null,r.a.createElement("h4",null,"Photo of Left Side Step"),r.a.createElement("div",null,r.a.createElement(be,{imageIdentifier:"stepLeftPhoto",handlePicture:this.props.handlePicture,required:!0}))),r.a.createElement("li",null,r.a.createElement("h4",null,"Photo of Right Side Step"),r.a.createElement("div",null,r.a.createElement(be,{imageIdentifier:"stepRightPhoto",handlePicture:this.props.handlePicture,required:!0}))))),r.a.createElement("br",null),r.a.createElement("hr",{style:{maxWidth:"90%"}}),r.a.createElement("br",null),r.a.createElement("div",{style:{maxWidth:"50vh"}},"Please estimate the height of your step and enter them below. Your measurement selection will be verified by StopGap staff by evaluating your measurement photo submissions. We may request new or additional photos to best design the ramp to fit your step."),r.a.createElement("br",null),r.a.createElement(g.a,{required:!0,style:{width:"30vh"},type:"number",inputProps:{min:"0",max:"100",step:"0.01"},id:"standard-required",label:"Step Height - Left",defaultValue:"",onChange:this.props.handleChange("leftStepHeight")}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(g.a,{required:!0,style:{width:"30vh"},type:"number",inputProps:{min:"0",max:"100",step:"0.01"},id:"standard-required",label:"Step Height - Right",defaultValue:"",onChange:this.props.handleChange("rightStepHeight")}),this.state.show&&r.a.createElement("h4",{style:{left:10,color:"red"}},"Please ensure that you've uploaded all the necessary photos."),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("div",{style:{marginBottom:"10px"}},r.a.createElement(p.a,{style:{right:10},color:"primary",variant:"contained",onClick:this.back},"Previous"),r.a.createElement(p.a,{type:"submit",color:"primary",variant:"contained",onClick:this.continue},"Next")))))}}]),a}(n.Component),Se=a(175),ke=a(172),we=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).continue=function(t){t.preventDefault(),e.props.handleUser(),e.props.nextStep()},e.back=function(t){t.preventDefault(),e.props.prevStep()},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center",textDecoration:"underline"}},"Liability Waiver, Assumption of Risk and Idemnity "),r.a.createElement("form",{onSubmit:this.continue},r.a.createElement("div",{className:"container",style:{width:"900px"}},r.a.createElement(Se.a,{style:{float:"left"},border:3,marginLeft:"5vh",maxWidth:"900px"},"Congratulations on joining The Ramp Project! By signing this document you waive certain legal rights, including the right to sue. Please read carefully before signing.",r.a.createElement("br",null),r.a.createElement("br",null),"I understand that The StopGap Foundation (\u201cStopGap\u201d) will construct and provide my business with a temporary ramp to be used to access my single stepped storefront. Once StopGap delivers the ramp, it is my property and my sole responsibility.",r.a.createElement("br",null),r.a.createElement("br",null),"I understand that in order to participate in The Ramp Project, I must agree to and sign this waiver and indemnity.",r.a.createElement("br",null),r.a.createElement("br",null),"I know that this ramp is not intended to be a permanent ramp to my storefront and that the ramp should only be used when needed. When in use, the ramp should be level and flush against the step with no gaps present. When the ramp is not in use, it should be stored in a safe location.",r.a.createElement("br",null),r.a.createElement("br",null),"I understand that the use or storage of the ramp could cause injury to persons or property. I accept all of the risks of my participation in The Ramp Project and the possibility of personal injury, death, property damage, or loss, whether caused by the negligence of Stop Gap or otherwise.",r.a.createElement("br",null),r.a.createElement("br",null),"I assume full responsibility and all liability for my acts or omissions, whether negligent or otherwise, in connection with my participation in The Ramp Project. I voluntarily and unconditionally release StopGap, its employees, contractors, agents, directors or volunteers from all claims including, but not limited to, personal injury and property damage, whether caused by negligence or otherwise, which I have or may have in the future.",r.a.createElement("br",null),r.a.createElement("br",null),"I agree to indemnify StopGap, its employees, contractors, agents, directors or volunteers for any and all liabilities, damages, costs, claims, suits, and actions that are directly or indirectly related to my activities or my participation in The Ramp Project. I agree not to sue or bring legal action against anyone who could seek contribution or indemnity from StopGap, its employees, contractors, agents, directors or volunteers under the Negligence Act."),r.a.createElement(ke.a,{required:!0,control:r.a.createElement(de.a,{required:!0,onChange:this.handleChange,name:"check"}),label:"I understand and agree to the Liability Waiver.",style:{marginLeft:"40px"}}),r.a.createElement(Se.a,{style:{float:"left",marginTop:"40px",marginLeft:"5vh"},maxWidth:"500px",border:3},r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Owner First/Last Name",defaultValue:"",onChange:this.props.handleChange("managerFirst")}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Owner Signature",defaultValue:"",onChange:this.props.handleChange("managerSig")}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Witness Name",defaultValue:"",onChange:this.props.handleChange("witnessName")}),r.a.createElement(g.a,{required:!0,id:"standard-required",label:"Witness Signature",defaultValue:"",onChange:this.props.handleChange("witnessSig")}),r.a.createElement("br",null),r.a.createElement(p.a,{style:{right:1,marginTop:"10px"},color:"primary",variant:"contained",onClick:this.back},"Previous"),r.a.createElement(p.a,{type:"submit",style:{left:6,marginTop:"10px"},color:"primary",variant:"contained"},"Next")))))}}]),a}(n.Component),Oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).nextStep=function(){var e=n.state.step;n.setState({step:e+1})},n.prevStep=function(){var e=n.state.step;n.setState({step:e-1})},n.handleChange=function(e){return function(t){n.setState(Object(se.a)({},e,t.target.value)),""!=n.state.rightStepHeight&&""!=n.state.leftStepHeight&&""!=n.state.entrywayPhoto&&""!=n.state.stepLeftPhoto&&""!=n.state.stepRightPhoto&&n.setState({Uploaded:!0})}},n.handleCheck=function(e){return function(t){n.setState(Object(se.a)({},e,!n.state.subsidize))}},n.handleUser=function(){n.props.verifyTokens().then((function(e){e&&fetch("/users",{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token-access"))}}).then((function(e){if(e.ok)return e.json();throw new Error("Something went wrong with error code ".concat(e.status))})).then((function(e){var t;e.results.map((function(e){e.username==n.props.username&&(t=e.pk)})),n.setState({isLoaded:!0,user:t}),n.handleSubmitWaiver()}),(function(e){n.setState({isLoaded:!0,error:e})}))}))},n.handleSubmitOrder=function(){var e={user:n.state.user,first_name:n.state.firstName,last_name:n.state.lastName,email:n.state.email,company:n.state.companyName,phone_number:n.state.phoneNumber,billing_address:n.state.deliveryAddress,shipping_address:n.state.billingAddress,waiver:n.state.waiver,entryway_photo:n.state.entrywayPhoto,step_left_photo:n.state.stepLeftPhoto,step_right_photo:n.state.stepRightPhoto,step_left_height:n.state.leftStepHeight,step_right_height:n.state.rightStepHeight,ramp_colour:n.state.rampColor,delivery_method:n.state.deliveryType,subsidize:n.state.subsidize,status:0,notes:"[]"};n.props.verifyTokens().then((function(t){if(t){var a={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+localStorage.getItem("token-access")},body:JSON.stringify(e)};fetch("/order-information/",a).then(function(){var e=Object(oe.a)(ie.a.mark((function e(t){var a,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return n=a&&a.message||t.status,e.abrupt("return",Promise.reject(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n.setState({errorMessage:e}),console.error("There was an error!",e),console.log(e)}))}}))},n.handleSubmitWaiver=function(){var e={user:n.state.user,signatory_first_name:n.state.managerFirst,signatory_last_name:n.state.managerFirst,signatory_signature:n.state.witnessSig,witness_first_name:n.state.witnessName,witness_last_name:n.state.witnessName,witness_signature:n.state.witnessSig};n.props.verifyTokens().then((function(t){if(t){var a=localStorage.getItem("token-access");console.log(a);var r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(e)};fetch("/waiver-information/",r).then(function(){var e=Object(oe.a)(ie.a.mark((function e(t){var a,r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return r=a&&a.message||t.status,e.abrupt("return",Promise.reject(r));case 6:n.setState({waiver:a.pk}),n.handleSubmitOrder();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){n.setState({errorMessage:t}),console.error("There was an error!",JSON.stringify(e))}))}}))},n.state={step:1,firstName:"",lastName:"",email:"",companyName:"",phoneNumber:"",deliveryAddress:"",deliveryType:"",rampColor:"",managerFirst:"",managerSig:"",witnessName:"",witnessSig:"",entrywayPhoto:"",stepLeftPhoto:"",stepRightPhoto:"",leftStepHeight:"",rightStepHeight:"",subsidize:!1,waiver:"",user:"",isLoaded:!1,Uploaded:!1},n.handlePicture=n.handlePicture.bind(Object(le.a)(n)),n}return Object(l.a)(a,[{key:"handlePicture",value:function(e,t){"entrywayPhoto"==e?this.setState({entrywayPhoto:t}):"stepLeftPhoto"==e?this.setState({stepLeftPhoto:t}):"stepRightPhoto"==e&&this.setState({stepRightPhoto:t}),""!=this.state.rightStepHeight&&""!=this.state.leftStepHeight&&""!=this.state.entrywayPhoto&&""!=this.state.stepLeftPhoto&&""!=this.state.stepRightPhoto&&this.setState({Uploaded:!0})}},{key:"render",value:function(){switch(this.state.step){case 0:return r.a.createElement(d.Redirect,{to:"/dashboard"});case 1:return r.a.createElement(he,{prevStep:this.prevStep,nextStep:this.nextStep,handleChange:this.handleChange,handleCheck:this.handleCheck});case 2:return r.a.createElement(Ee,{prevStep:this.prevStep,nextStep:this.nextStep,handlePicture:this.handlePicture,handleChange:this.handleChange,Uploaded:this.state.Uploaded});case 3:return r.a.createElement(we,{nextStep:this.nextStep,prevStep:this.prevStep,handleSubmitWaiver:this.handleSubmitWaiver,handleSubmitOrder:this.handleSubmitOrder,handleUser:this.handleUser,handleChange:this.handleChange});case 4:return r.a.createElement("div",null,r.a.createElement("h1",null," Thank you! We'll be in contact about your request."),r.a.createElement(m.b,{to:"/dashboard"},"Go back home."));default:return r.a.createElement(d.Redirect,{to:"/dashboard"})}}}]),a}(n.Component),je=a(173),Ce=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).refresh=function(){console.log("refreshing!");var e=localStorage.hasOwnProperty("token-refresh")?localStorage.getItem("token-refresh"):"";fetch("/api/token/refresh/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({refresh:e})}).then((function(e){return e.json()})).then((function(e){"access"in e?(localStorage.setItem("token-access",e.access),n.setState({loggedIn:!0,isCurrentlyCheckingStorageForLogin:!1})):n.setState({loggedIn:!1,isCurrentlyCheckingStorageForLogin:!1})}),(function(e){console.error(e),n.setState({loggedIn:!1,isCurrentlyCheckingStorageForLogin:!1})}))},n.login=function(e,t,a){if(console.log("StopGap: Logging in..."),n.state.loggedIn)return console.error("Stopgap: user already logged in."),n.setState({loggedIn:!1}),void n.setState({loggedIn:!0});fetch("/api/token/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(t){console.log(t),"detail"in t?(localStorage.removeItem("token-access"),localStorage.removeItem("token-refresh"),n.setState({loggedIn:!1,invalidLogin:!0,loginMsg:"Login credentials not valid."})):"access"in t&&"refresh"in t&&"user"in t&&"isAdmin"in t&&(t.isAdmin!=a?n.setState({loggedIn:!1,username:e,invalidLogin:!0,loginMsg:"Attempting to use a".concat(t.isAdmin?"n admin":" client"," account to access the ").concat(a?"admin":"client"," dashboard")}):(localStorage.setItem("token-access",t.access),localStorage.setItem("token-refresh",t.refresh),localStorage.setItem("username",t.user),localStorage.setItem("is-admin",t.isAdmin),n.setState({loggedIn:!0,isAdmin:a,invalidLogin:!1,username:e,loginMsg:""})))}),(function(e){n.setState({loggedIn:!1,invalidLogin:!0,loginMsg:"An error occurred while attempting to validate login credentials."}),console.error(e)}))},n.register=function(e,t,a,r,i){if(console.log("StopGap: Registering new user..."),n.state.loggedIn)return console.error("Stopgap: user already logged in."),n.setState({loggedIn:!1,username:e}),void n.setState({loggedIn:!0,username:e});fetch("/users/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({username:e,password:t,email:e,first_name:a,last_name:r,is_staff:i})}).then((function(a){n.login(e,t,i)}))},n.logout=function(){n.setState({loggedIn:!1,isAdmin:!1,invalidLogin:!1,loginMsg:"",username:""}),localStorage.removeItem("token-access"),localStorage.removeItem("token-refresh"),localStorage.removeItem("username"),localStorage.removeItem("is-admin")},n.quickRefresh=function(){console.log("(quick) refreshing!");var e=localStorage.hasOwnProperty("token-refresh")?localStorage.getItem("token-refresh"):"";return new Promise((function(t,a){fetch("/api/token/refresh/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({refresh:e})}).then((function(e){return e.json()})).then((function(e){"access"in e?(localStorage.setItem("token-access",e.access),t(!0)):(n.setState({loggedIn:!1,isCurrentlyCheckingStorageForLogin:!1}),t(!1))}),(function(e){console.error(e),!1,n.setState({loggedIn:!1,isCurrentlyCheckingStorageForLogin:!1}),a(!1)}))}))},n.verifyTokens=function(){n.setState({loggedIn:!0,isCurrentlyCheckingStorageForLogin:!0});var e=localStorage.hasOwnProperty("token-access")?localStorage.getItem("token-access"):"";return new Promise((function(t,a){fetch("/api/token/verify/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return e.ok})).then((function(e){console.log("ok ok"),e?(console.log("its good"),t(!0)):(console.log("bouta refresh"),n.quickRefresh().then((function(e){t(e)})))})).catch((function(e){console.error(e),a(!1)}))}))},n.state={loggedIn:!1,invalidLogin:!1,loginMsg:"",isAdmin:!1,isCurrentlyCheckingStorageForLogin:!0,error:null,isLoaded:!1,username:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.hasOwnProperty("token-access")?localStorage.getItem("token-access"):"";fetch("/api/token/verify/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify({token:t})}).then((function(t){t.ok?e.setState({loggedIn:!0,isCurrentlyCheckingStorageForLogin:!1}):(console.log("about to refresh . . ."),e.refresh())}),(function(t){console.error(t),e.setState({loggedIn:!1,isCurrentlyCheckingStorageForLogin:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(m.a,null,r.a.createElement(d.Switch,null," ",r.a.createElement(d.Route,{path:"/login",render:function(){return r.a.createElement(S,{loggedIn:e.state.loggedIn,login:e.login,logout:e.logout,register:e.register,isAdmin:e.state.isAdmin,invalidLogin:e.state.invalidLogin,loginMsg:e.state.loginMsg})}}),r.a.createElement(d.Route,{path:"/dashboard",render:function(){return e.state.loggedIn?r.a.createElement(ne,{loggedIn:e.state.loggedIn,logout:e.logout,verifyTokens:e.verifyTokens}):r.a.createElement(d.Redirect,{to:"/login"})}}),r.a.createElement(d.Route,{exact:!0,path:"/form",render:function(){return r.a.createElement(Oe,{username:e.state.username,verifyTokens:e.verifyTokens})}}),r.a.createElement(d.Route,{path:"/",render:function(){return e.state.isCurrentlyCheckingStorageForLogin?r.a.createElement("div",null,r.a.createElement("h1",null,"Loading . . ."),r.a.createElement(je.a,null)):r.a.createElement(d.Redirect,{path:"/",to:e.state.loggedIn?"/dashboard":"/login"})}}))))}}]),a}(r.a.Component),Ne=document.getElementById("root");Object(i.render)(r.a.createElement(Ce,null),Ne);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},89:function(e,t,a){},90:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.58b51443.chunk.js.map