{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import\"./styles.css\";import Button from\"@material-ui/core/Button\";import Link from\"react-router-dom/Link\";import ListingBox from\"../Listings\";/* Primary Component for the Admin Dashboard page */var ClientDashboard=/*#__PURE__*/function(_React$Component){_inherits(ClientDashboard,_React$Component);var _super=_createSuper(ClientDashboard);function ClientDashboard(props){var _this;_classCallCheck(this,ClientDashboard);_this=_super.call(this,props);_this.state={error:null,isLoaded:false,userisLoaded:false,orders:[],users:[],username:_this.props.username};return _this;}_createClass(ClientDashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// if(!this.state.isLoaded){\nfetch(\"/users\",{method:'GET',headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token-access'))}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){var users=result[\"results\"];// users.map(x => {\n//   if (x[\"username\"] == this.props.username){\n//       id = x[\"pk\"]\n//   }\n// })\n_this2.setState({isLoaded:true,users:users});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this2.setState({isLoaded:true,error:error});});// }\n}},{key:\"handleUser\",value:function handleUser(){var _this3=this;fetch(\"/order-information/\",{method:'GET',headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token-access'))}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){var orders=result[\"results\"];var results=[];var users=_this3.state.users;var user;console.log(users);console.log(_this3.state.username);users.map(function(x){if(x[\"username\"]==_this3.state.username){user=x;}});orders.map(function(x){// console.log(x[\"user\"])\nif(x[\"user\"]==user[\"pk\"]){results.push(x);}});_this3.setState({userisLoaded:true,orders:results});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this3.setState({userisLoaded:true,error:error});});}},{key:\"render\",value:function render(){console.log(this.state);if(this.state.isLoaded&&!this.state.userisLoaded){this.handleUser();}var gotoFuncs=this.props.gotoFuncs.gotoFuncs;var orders=this.state.orders;var isLoaded=this.state.isLoaded;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{style:{textAlign:'center'}},\"Welcome to StopGap!\"),/*#__PURE__*/React.createElement(Link,{to:\"/form\"},/*#__PURE__*/React.createElement(Button,{className:\"newRequestButton\",color:\"primary\",variant:\"contained\",size:\"large\",style:{display:'block',marginLeft:'auto',marginRight:'auto',marginTop:'10%'}},\"Create New Ramp Request\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(ListingBox,{click:function click(data){return gotoFuncs.ramp_info(true,data);},orders:orders,isAdmin:this.props.isAdmin,isLoaded:isLoaded}));}}]);return ClientDashboard;}(React.Component);export default ClientDashboard;","map":{"version":3,"sources":["C:/Users/owner/desktop/team/app/src/components/react-components/Dashboard/client_dash.js"],"names":["React","Button","Link","ListingBox","ClientDashboard","props","state","error","isLoaded","userisLoaded","orders","users","username","fetch","method","headers","localStorage","getItem","then","res","ok","json","Error","status","result","setState","results","user","console","log","map","x","push","handleUser","gotoFuncs","textAlign","display","marginLeft","marginRight","marginTop","data","ramp_info","isAdmin","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./styles.css\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Link from \"react-router-dom/Link\";\r\nimport ListingBox from \"../Listings\";\r\n\r\n/* Primary Component for the Admin Dashboard page */\r\nclass ClientDashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      userisLoaded: false,\r\n      orders: [],\r\n      users:[],\r\n      username:this.props.username\r\n    }\r\n  }\r\n\r\n\r\n  componentDidMount()  {\r\n    // if(!this.state.isLoaded){\r\n\r\n    \r\n    fetch(\"/users\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n\r\n        const users = result[\"results\"];\r\n        // users.map(x => {\r\n        //   if (x[\"username\"] == this.props.username){\r\n        //       id = x[\"pk\"]\r\n\r\n              \r\n        //   }\r\n        // })\r\n\r\n        this.setState({\r\n          isLoaded: true,\r\n          users:users\r\n        });\r\n      \r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        });\r\n       \r\n      }\r\n    )\r\n    // }\r\n  \r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  \r\n\r\n  handleUser() {\r\n\r\n\r\n\r\n\r\n    fetch(\"/order-information/\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n\r\n        const orders = result[\"results\"];\r\n        var results = []\r\n\r\n        \r\n        const users = this.state.users;\r\n\r\n\r\n        var user\r\n        console.log(users)\r\n        console.log(this.state.username)\r\n\r\n        users.map(x => {\r\n            if (x[\"username\"] == this.state.username){\r\n              user = x\r\n            }\r\n          }\r\n         )\r\n\r\n\r\n        orders.map(x => {\r\n          // console.log(x[\"user\"])\r\n          if (x[\"user\"] == user[\"pk\"]){\r\n            \r\n              results.push(x)\r\n          }\r\n        })\r\n\r\n\r\n\r\n\r\n        this.setState({\r\n          userisLoaded:true,\r\n          orders: results\r\n        });\r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          userisLoaded:true,\r\n          error\r\n        });\r\n      }\r\n    )\r\n  \r\n\r\n}\r\n  \r\n\r\n  render() {\r\n    console.log(this.state)\r\n   \r\n  \r\n    if (this.state.isLoaded && !this.state.userisLoaded){\r\n      this.handleUser()\r\n    }\r\n    const {gotoFuncs} = this.props.gotoFuncs;\r\n    const orders= this.state.orders;\r\n    const isLoaded = this.state.isLoaded;\r\n    return (\r\n      <div>\r\n        <h1 style={{ textAlign: 'center' }}>\r\n          Welcome to StopGap!\r\n        </h1>\r\n        <Link to='/form'>\r\n          <Button\r\n            className=\"newRequestButton\"\r\n            color=\"primary\" variant=\"contained\" size='large'\r\n            style={{ display: 'block', marginLeft: 'auto', marginRight: 'auto', marginTop: '10%' }}>\r\n            Create New Ramp Request\r\n          </Button>\r\n        </Link>\r\n        <br />\r\n        <br />\r\n        <ListingBox click={(data) => gotoFuncs.ramp_info(true,data)} orders={orders} isAdmin = { this.props.isAdmin} isLoaded={isLoaded}/>\r\n        {/* <ListingBox click={(id) => this.props.gotoFuncs.ramp_info(false,id)} /> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ClientDashboard;\r\n"]},"metadata":{},"sourceType":"module"}