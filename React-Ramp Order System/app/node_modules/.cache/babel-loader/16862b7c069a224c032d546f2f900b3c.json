{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import\"./styles.css\";import Button from\"@material-ui/core/Button\";import Link from\"react-router-dom/Link\";import ListingBox from\"../Listings\";/* Primary Component for the Admin Dashboard page */var ClientDashboard=/*#__PURE__*/function(_React$Component){_inherits(ClientDashboard,_React$Component);var _super=_createSuper(ClientDashboard);function ClientDashboard(props){var _this;_classCallCheck(this,ClientDashboard);_this=_super.call(this,props);_this.state={error:null,isLoaded:false,orders:[],user:-1};return _this;}_createClass(ClientDashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"/users\",{method:'GET',headers:{'Accept':'application/json'// 'Authorization': `Bearer ${localStorage.getItem('token-access')}`\n}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){var users=result[\"results\"];console.log(users);var id;users.map(function(x){if(x[\"username\"]==_this2.props.username){id=x[\"pk\"];}});console.log(id);_this2.setState({isLoaded:true,users:users,user:id});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this2.setState({isLoaded:true,error:error});});fetch(\"/order-information/\",{method:'GET',headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token-access'))}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){console.log(result);var orders=result[\"results\"];var results=[];orders.map(function(x){if(x[\"user\"]==_this2.state.user){results.push(x);}});console.log(results);_this2.setState({isLoaded:true,orders:results});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this2.setState({isLoaded:true,error:error});});}},{key:\"render\",value:function render(){var gotoFuncs=this.props.gotoFuncs;var _this$state=this.state,orders=_this$state.orders,isLoaded=_this$state.isLoaded;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{style:{textAlign:'center'}},\"Welcome to StopGap!\"),/*#__PURE__*/React.createElement(Link,{to:\"/form\"},/*#__PURE__*/React.createElement(Button,{className:\"newRequestButton\",color:\"primary\",variant:\"contained\",size:\"large\",style:{display:'block',marginLeft:'auto',marginRight:'auto',marginTop:'10%'}},\"Create New Ramp Request\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(ListingBox,{click:function click(data){return gotoFuncs.ramp_info(true,data);},orders:orders,isAdmin:true,isLoaded:isLoaded}));}}]);return ClientDashboard;}(React.Component);export default ClientDashboard;","map":{"version":3,"sources":["C:/Users/owner/desktop/team/app/src/components/react-components/Dashboard/client_dash.js"],"names":["React","Button","Link","ListingBox","ClientDashboard","props","state","error","isLoaded","orders","user","fetch","method","headers","then","res","ok","json","Error","status","result","users","console","log","id","map","x","username","setState","localStorage","getItem","results","push","gotoFuncs","textAlign","display","marginLeft","marginRight","marginTop","data","ramp_info","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./styles.css\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Link from \"react-router-dom/Link\";\r\nimport ListingBox from \"../Listings\";\r\n\r\n/* Primary Component for the Admin Dashboard page */\r\nclass ClientDashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      orders: [],\r\n      user:-1\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(\"/users\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        // 'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n\r\n        const users = result[\"results\"];\r\n        console.log(users)\r\n        var id\r\n        users.map(x => {\r\n          if (x[\"username\"] == this.props.username){\r\n              id = x[\"pk\"]\r\n          }\r\n        })\r\n        console.log(id)\r\n\r\n        this.setState({\r\n          isLoaded: true,\r\n          users: users,\r\n          user:id\r\n        });\r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        });\r\n      }\r\n    )\r\n\r\n    fetch(\"/order-information/\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n        console.log(result)\r\n        const orders = result[\"results\"];\r\n        var results = []\r\n\r\n        orders.map(x => {\r\n          if (x[\"user\"] == this.state.user){\r\n              results.push(x)\r\n          }\r\n        })\r\n        console.log(results)\r\n\r\n\r\n\r\n        this.setState({\r\n          isLoaded: true,\r\n          orders: results\r\n        });\r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        });\r\n      }\r\n    )\r\n  }\r\n  \r\n\r\n  render() {\r\n    const {gotoFuncs} = this.props;\r\n    const {orders, isLoaded} = this.state;\r\n    return (\r\n      <div>\r\n        <h1 style={{ textAlign: 'center' }}>\r\n          Welcome to StopGap!\r\n        </h1>\r\n        <Link to='/form'>\r\n          <Button\r\n            className=\"newRequestButton\"\r\n            color=\"primary\" variant=\"contained\" size='large'\r\n            style={{ display: 'block', marginLeft: 'auto', marginRight: 'auto', marginTop: '10%' }}>\r\n            Create New Ramp Request\r\n          </Button>\r\n        </Link>\r\n        <br />\r\n        <br />\r\n        <ListingBox click={(data) => gotoFuncs.ramp_info(true,data)} orders={orders} isAdmin isLoaded={isLoaded}/>\r\n        {/* <ListingBox click={(id) => this.props.gotoFuncs.ramp_info(false,id)} /> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ClientDashboard;\r\n"]},"metadata":{},"sourceType":"module"}