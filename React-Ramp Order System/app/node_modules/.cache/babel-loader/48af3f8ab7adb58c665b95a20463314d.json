{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Redirect}from\"react-router-dom\";import\"./styles.css\";import Navbar from\"../Navbar\";import AdminDashboard from\"./Admin/admin_dash\";import ClientDashboard from\"./client_dash\";import RampInfoPage from\"./RampInfoPage\";/* Primary Component for the Admin Dashboard page */var Dashboard=/*#__PURE__*/function(_React$Component){_inherits(Dashboard,_React$Component);var _super=_createSuper(Dashboard);_createClass(Dashboard,[{key:\"getID\",value:function getID(){var _this2=this;fetch(\"/users\",{method:'GET',headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token-access'))}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){var id;var users=result[\"results\"];users.map(function(x){if(x[\"username\"]==_this2.props.username){id=x[\"pk\"];}});_this2.setState({isLoaded:true,id:id});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this2.setState({isLoaded:true,error:error});});}}]);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_super.call(this,props);_this.pushToStack=function(component){var newStack=_toConsumableArray(_this.state.pageStack);newStack.push(component);_this.setState({pageStack:newStack});};_this.goBack=function(){var newStack=_toConsumableArray(_this.state.pageStack);newStack.pop();_this.setState({pageStack:newStack});};_this.gotoFuncs={ramp_info:function ramp_info(isAdmin,data){return _this.pushToStack(/*#__PURE__*/React.createElement(RampInfoPage,{goBack:_this.goBack,data:data,isAdmin:isAdmin}));}};var id=_this.getID;_this.state={pageStack:[],// when we navigate to a \"sub-page\", push to stack. When we \"go back\", pop from stack\nisLoaded:false,// \norders:[],// list of all orders TODO: don't load ALL orders here, since then clients can view it via dev tools\nid:id};return _this;}_createClass(Dashboard,[{key:\"render\",// getID() {\n//   fetch(\"/users\", {\n//     method: 'GET',\n//     headers: {\n//       'Accept': 'application/json',\n//       'Authorization': `Bearer ${localStorage.getItem('token-access')}`\n//     }\n//   })\n//   .then(res => {\n//     if (res.ok)\n//       return res.json()\n//     throw new Error(`Something went wrong with error code ${res.status}`)\n//   })\n//   .then(\n//     (result) => {\n//       var id \n//       const users = result[\"results\"];\n//       users.map(x => {\n//         if (x[\"username\"] == this.props.username){\n//             id = x[\"pk\"]\n//         }\n//       })\n//       this.setState({\n//         isLoaded: true,\n//         id:id\n//       });\n//     },\n//     // Note: it's important to handle errors here\n//     // instead of a catch() block so that we don't swallow\n//     // exceptions from actual bugs in components.\n//     (error) => {\n//       this.setState({\n//         isLoaded: true,\n//         error\n//       });\n//     }\n//   )\n// }\nvalue:function render(){if(!this.props.loggedIn)// user is not logged in.\nreturn/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});console.log(this.state.id);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{title:this.props.isAdmin?\"Admin Dashboard\":\"Client Dashboard\",logout:this.props.logout,goBack:this.goBack,stackSize:this.state.pageStack.length}),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},this.state.pageStack.length==0?this.props.isAdmin?/*#__PURE__*/React.createElement(AdminDashboard,{user:this.state.user,logout:this.props.logout,gotoFuncs:this.gotoFuncs}):/*#__PURE__*/React.createElement(ClientDashboard,{user:this.state.id,l:true,logout:this.props.logout,gotoFuncs:this.gotoFuncs}):this.state.pageStack[this.state.pageStack.length-1]));}}]);return Dashboard;}(React.Component);export default Dashboard;","map":{"version":3,"sources":["C:/Users/owner/desktop/team/app/src/components/react-components/Dashboard/index.js"],"names":["React","Redirect","Navbar","AdminDashboard","ClientDashboard","RampInfoPage","Dashboard","fetch","method","headers","localStorage","getItem","then","res","ok","json","Error","status","result","id","users","map","x","props","username","setState","isLoaded","error","pushToStack","component","newStack","state","pageStack","push","goBack","pop","gotoFuncs","ramp_info","isAdmin","data","getID","orders","loggedIn","console","log","logout","length","user","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport \"./styles.css\";\r\nimport Navbar from \"../Navbar\";\r\nimport AdminDashboard from \"./Admin/admin_dash\";\r\nimport ClientDashboard from \"./client_dash\";\r\nimport RampInfoPage from \"./RampInfoPage\";\r\n\r\n/* Primary Component for the Admin Dashboard page */\r\nclass Dashboard extends React.Component {\r\n    getID() {\r\n    fetch(\"/users\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n        var id \r\n\r\n        const users = result[\"results\"];\r\n        users.map(x => {\r\n          if (x[\"username\"] == this.props.username){\r\n              id = x[\"pk\"]\r\n\r\n              \r\n          }\r\n        })\r\n\r\n        this.setState({\r\n          isLoaded: true,\r\n          id:id\r\n        });\r\n      \r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        });\r\n       \r\n      }\r\n    )\r\n\r\n  \r\n\r\n  }\r\n\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const id = this.getID\r\n\r\n    \r\n\r\n\r\n    \r\n    this.state = {\r\n      pageStack: [], // when we navigate to a \"sub-page\", push to stack. When we \"go back\", pop from stack\r\n      isLoaded: false, // \r\n      orders: [], // list of all orders TODO: don't load ALL orders here, since then clients can view it via dev tools\r\n      id:id\r\n    }\r\n  }\r\n\r\n  pushToStack = (component) => {\r\n    const newStack = [... this.state.pageStack];\r\n    newStack.push(component);\r\n    this.setState({\r\n      pageStack: newStack\r\n    });\r\n  }\r\n\r\n  goBack = () => {\r\n    const newStack = [... this.state.pageStack];\r\n    newStack.pop();\r\n    this.setState({\r\n      pageStack: newStack\r\n    });\r\n  }\r\n\r\n  gotoFuncs = {\r\n    ramp_info: (isAdmin,data) => this.pushToStack(<RampInfoPage goBack = {this.goBack} data = {data} isAdmin={isAdmin} />)\r\n  }\r\n\r\n  // getID() {\r\n  //   fetch(\"/users\", {\r\n  //     method: 'GET',\r\n  //     headers: {\r\n  //       'Accept': 'application/json',\r\n  //       'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n  //     }\r\n  //   })\r\n  //   .then(res => {\r\n  //     if (res.ok)\r\n  //       return res.json()\r\n  //     throw new Error(`Something went wrong with error code ${res.status}`)\r\n  //   })\r\n  //   .then(\r\n  //     (result) => {\r\n  //       var id \r\n\r\n  //       const users = result[\"results\"];\r\n  //       users.map(x => {\r\n  //         if (x[\"username\"] == this.props.username){\r\n  //             id = x[\"pk\"]\r\n\r\n              \r\n  //         }\r\n  //       })\r\n\r\n  //       this.setState({\r\n  //         isLoaded: true,\r\n  //         id:id\r\n  //       });\r\n      \r\n  //     },\r\n  //     // Note: it's important to handle errors here\r\n  //     // instead of a catch() block so that we don't swallow\r\n  //     // exceptions from actual bugs in components.\r\n  //     (error) => {\r\n  //       this.setState({\r\n  //         isLoaded: true,\r\n  //         error\r\n  //       });\r\n       \r\n  //     }\r\n  //   )\r\n\r\n  \r\n\r\n  // }\r\n\r\n  \r\n\r\n\r\n  \r\n  \r\n\r\n  render () {\r\n    if (!this.props.loggedIn) // user is not logged in.\r\n      return <Redirect to=\"/\" /> \r\n\r\n\r\n    \r\n    console.log(this.state.id)\r\n\r\n\r\n    \r\n    return (\r\n      <div>\r\n        <Navbar title={this.props.isAdmin ? \"Admin Dashboard\" : \"Client Dashboard\"} logout={this.props.logout} goBack={this.goBack} stackSize={this.state.pageStack.length}/>\r\n        <div className={\"content\"}>\r\n          {this.state.pageStack.length == 0 ? \r\n            this.props.isAdmin \r\n              ? <AdminDashboard user = {this.state.user} logout={this.props.logout} gotoFuncs={this.gotoFuncs} /> \r\n              : <ClientDashboard user = {this.state.id} l logout={this.props.logout}  gotoFuncs={this.gotoFuncs} /> :\r\n            this.state.pageStack[this.state.pageStack.length - 1]\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}