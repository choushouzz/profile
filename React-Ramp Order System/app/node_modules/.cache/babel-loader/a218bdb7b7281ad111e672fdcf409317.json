{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import\"./styles.css\";import Button from\"@material-ui/core/Button\";import Link from\"react-router-dom/Link\";import ListingBox from\"../Listings\";/* Primary Component for the Admin Dashboard page */var ClientDashboard=/*#__PURE__*/function(_React$Component){_inherits(ClientDashboard,_React$Component);var _super=_createSuper(ClientDashboard);function ClientDashboard(props){var _this;_classCallCheck(this,ClientDashboard);_this=_super.call(this,props);console.log(_this.props);_this.state={error:null,isLoaded:false,userisLoaded:false,orders:[],users:[],username:_this.props.username};return _this;}_createClass(ClientDashboard,[{key:\"handleUser\",value:function handleUser(){var _this2=this;fetch(\"/users\",{method:'GET',headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token-access'))}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){var users=result[\"results\"];// users.map(x => {\n//   if (x[\"username\"] == this.props.username){\n//       id = x[\"pk\"]\n//   }\n// })\n_this2.setState({userisLoaded:true,users:users});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this2.setState({userisLoaded:true,error:error});});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this3=this;if(!this.state.isLoaded){fetch(\"/order-information/\",{method:'GET',headers:{'Accept':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('token-access'))}}).then(function(res){if(res.ok)return res.json();throw new Error(\"Something went wrong with error code \".concat(res.status));}).then(function(result){var orders=result[\"results\"];var results=[];var users=_this3.state.users;console.log(_this3.state);var user;users.map(function(x){if(x[\"username\"]==_this3.state.username){user=x;}});console.log(user);orders.map(function(x){// console.log(x[\"user\"])\nif(x[\"user\"]==user[\"pk\"]){results.push(x);}});console.log(results);_this3.setState({isLoaded:true,orders:results});},// Note: it's important to handle errors here\n// instead of a catch() block so that we don't swallow\n// exceptions from actual bugs in components.\nfunction(error){_this3.setState({isLoaded:true,error:error});});}}},{key:\"render\",value:function render(){console.log(this.state);if(!this.state.userisLoaded){this.handleUser();}console.log(this.state);var gotoFuncs=this.props.gotoFuncs;var _this$state=this.state,orders=_this$state.orders,isLoaded=_this$state.isLoaded;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{style:{textAlign:'center'}},\"Welcome to StopGap!\"),/*#__PURE__*/React.createElement(Link,{to:\"/form\"},/*#__PURE__*/React.createElement(Button,{className:\"newRequestButton\",color:\"primary\",variant:\"contained\",size:\"large\",style:{display:'block',marginLeft:'auto',marginRight:'auto',marginTop:'10%'}},\"Create New Ramp Request\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(ListingBox,{click:function click(data){return gotoFuncs.ramp_info(true,data);},orders:orders,isAdmin:true,isLoaded:isLoaded}));}}]);return ClientDashboard;}(React.Component);export default ClientDashboard;","map":{"version":3,"sources":["C:/Users/owner/desktop/team/app/src/components/react-components/Dashboard/client_dash.js"],"names":["React","Button","Link","ListingBox","ClientDashboard","props","console","log","state","error","isLoaded","userisLoaded","orders","users","username","fetch","method","headers","localStorage","getItem","then","res","ok","json","Error","status","result","setState","results","user","map","x","push","handleUser","gotoFuncs","textAlign","display","marginLeft","marginRight","marginTop","data","ramp_info","Component"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,aAAvB,CAEA,oD,GACMC,CAAAA,e,8HACJ,yBAAYC,KAAZ,CAAmB,iDACjB,uBAAMA,KAAN,EAEAC,OAAO,CAACC,GAAR,CAAY,MAAKF,KAAjB,EAMA,MAAKG,KAAL,CAAa,CACXC,KAAK,CAAE,IADI,CAEXC,QAAQ,CAAE,KAFC,CAGXC,YAAY,CAAE,KAHH,CAIXC,MAAM,CAAE,EAJG,CAKXC,KAAK,CAAC,EALK,CAMXC,QAAQ,CAAC,MAAKT,KAAL,CAAWS,QANT,CAAb,CATiB,aAiBlB,C,2EAGa,iBACZC,KAAK,CAAC,QAAD,CAAW,CACdC,MAAM,CAAE,KADM,CAEdC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAA3B,CAFO,CAFK,CAAX,CAAL,CAOCC,IAPD,CAOM,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,EAAR,CACE,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACF,KAAM,IAAIC,CAAAA,KAAJ,gDAAkDH,GAAG,CAACI,MAAtD,EAAN,CACD,CAXD,EAYCL,IAZD,CAaE,SAACM,MAAD,CAAY,CAEV,GAAMb,CAAAA,KAAK,CAAGa,MAAM,CAAC,SAAD,CAApB,CACA;AACA;AACA;AAGA;AACA;AAEA,MAAI,CAACC,QAAL,CAAc,CACZhB,YAAY,CAAC,IADD,CAEZE,KAAK,CAACA,KAFM,CAAd,EAKD,CA7BH,CA8BE;AACA;AACA;AACA,SAACJ,KAAD,CAAW,CACT,MAAI,CAACkB,QAAL,CAAc,CACZhB,YAAY,CAAC,IADD,CAEZF,KAAK,CAALA,KAFY,CAAd,EAKD,CAvCH,EA4CD,C,6DAOmB,iBAElB,GAAI,CAAC,KAAKD,KAAL,CAAWE,QAAhB,CAAyB,CAGzBK,KAAK,CAAC,qBAAD,CAAwB,CAC3BC,MAAM,CAAE,KADmB,CAE3BC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,iCAA2BC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAA3B,CAFO,CAFkB,CAAxB,CAAL,CAOCC,IAPD,CAOM,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,EAAR,CACE,MAAOD,CAAAA,GAAG,CAACE,IAAJ,EAAP,CACF,KAAM,IAAIC,CAAAA,KAAJ,gDAAkDH,GAAG,CAACI,MAAtD,EAAN,CACD,CAXD,EAYCL,IAZD,CAaE,SAACM,MAAD,CAAY,CAEV,GAAMd,CAAAA,MAAM,CAAGc,MAAM,CAAC,SAAD,CAArB,CACA,GAAIE,CAAAA,OAAO,CAAG,EAAd,CAGA,GAAMf,CAAAA,KAAK,CAAG,MAAI,CAACL,KAAL,CAAWK,KAAzB,CAEAP,OAAO,CAACC,GAAR,CAAY,MAAI,CAACC,KAAjB,EACA,GAAIqB,CAAAA,IAAJ,CAEAhB,KAAK,CAACiB,GAAN,CAAU,SAAAC,CAAC,CAAI,CACX,GAAIA,CAAC,CAAC,UAAD,CAAD,EAAiB,MAAI,CAACvB,KAAL,CAAWM,QAAhC,CAAyC,CACvCe,IAAI,CAAGE,CAAP,CACD,CACF,CAJH,EAOCzB,OAAO,CAACC,GAAR,CAAYsB,IAAZ,EAEDjB,MAAM,CAACkB,GAAP,CAAW,SAAAC,CAAC,CAAI,CACd;AACA,GAAIA,CAAC,CAAC,MAAD,CAAD,EAAaF,IAAI,CAAC,IAAD,CAArB,CAA4B,CAExBD,OAAO,CAACI,IAAR,CAAaD,CAAb,EACH,CACF,CAND,EAOAzB,OAAO,CAACC,GAAR,CAAYqB,OAAZ,EAIA,MAAI,CAACD,QAAL,CAAc,CACZjB,QAAQ,CAAE,IADE,CAEZE,MAAM,CAAEgB,OAFI,CAAd,EAID,CAhDH,CAiDE;AACA;AACA;AACA,SAACnB,KAAD,CAAW,CACT,MAAI,CAACkB,QAAL,CAAc,CACZjB,QAAQ,CAAE,IADE,CAEZD,KAAK,CAALA,KAFY,CAAd,EAID,CAzDH,EA2DD,CAEF,C,uCAGU,CACPH,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EACA,GAAI,CAAC,KAAKA,KAAL,CAAWG,YAAhB,CAA6B,CAC3B,KAAKsB,UAAL,GACD,CACD3B,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAjB,EALO,GAMA0B,CAAAA,SANA,CAMa,KAAK7B,KANlB,CAMA6B,SANA,iBAOoB,KAAK1B,KAPzB,CAOAI,MAPA,aAOAA,MAPA,CAOQF,QAPR,aAOQA,QAPR,CAQP,mBACE,4CACE,0BAAI,KAAK,CAAE,CAAEyB,SAAS,CAAE,QAAb,CAAX,wBADF,cAIE,oBAAC,IAAD,EAAM,EAAE,CAAC,OAAT,eACE,oBAAC,MAAD,EACE,SAAS,CAAC,kBADZ,CAEE,KAAK,CAAC,SAFR,CAEkB,OAAO,CAAC,WAF1B,CAEsC,IAAI,CAAC,OAF3C,CAGE,KAAK,CAAE,CAAEC,OAAO,CAAE,OAAX,CAAoBC,UAAU,CAAE,MAAhC,CAAwCC,WAAW,CAAE,MAArD,CAA6DC,SAAS,CAAE,KAAxE,CAHT,4BADF,CAJF,cAYE,8BAZF,cAaE,8BAbF,cAcE,oBAAC,UAAD,EAAY,KAAK,CAAE,eAACC,IAAD,QAAUN,CAAAA,SAAS,CAACO,SAAV,CAAoB,IAApB,CAAyBD,IAAzB,CAAV,EAAnB,CAA6D,MAAM,CAAE5B,MAArE,CAA6E,OAAO,KAApF,CAAqF,QAAQ,CAAEF,QAA/F,EAdF,CADF,CAmBD,C,6BAzK2BV,KAAK,CAAC0C,S,EA4KpC,cAAetC,CAAAA,eAAf","sourcesContent":["import React from \"react\";\r\nimport \"./styles.css\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Link from \"react-router-dom/Link\";\r\nimport ListingBox from \"../Listings\";\r\n\r\n/* Primary Component for the Admin Dashboard page */\r\nclass ClientDashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    console.log(this.props)\r\n\r\n    \r\n\r\n    \r\n\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      userisLoaded: false,\r\n      orders: [],\r\n      users:[],\r\n      username:this.props.username\r\n    }\r\n  }\r\n\r\n\r\n  handleUser()  {\r\n    fetch(\"/users\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n\r\n        const users = result[\"results\"];\r\n        // users.map(x => {\r\n        //   if (x[\"username\"] == this.props.username){\r\n        //       id = x[\"pk\"]\r\n\r\n              \r\n        //   }\r\n        // })\r\n\r\n        this.setState({\r\n          userisLoaded:true,\r\n          users:users\r\n        });\r\n      \r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          userisLoaded:true,\r\n          error\r\n        });\r\n       \r\n      }\r\n    )\r\n\r\n  \r\n\r\n  }\r\n\r\n  \r\n\r\n\r\n  \r\n\r\n  componentDidMount() {\r\n\r\n    if (!this.state.isLoaded){\r\n\r\n\r\n    fetch(\"/order-information/\", {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.getItem('token-access')}`\r\n      }\r\n    })\r\n    .then(res => {\r\n      if (res.ok)\r\n        return res.json()\r\n      throw new Error(`Something went wrong with error code ${res.status}`)\r\n    })\r\n    .then(\r\n      (result) => {\r\n\r\n        const orders = result[\"results\"];\r\n        var results = []\r\n\r\n        \r\n        const users = this.state.users;\r\n\r\n        console.log(this.state)\r\n        var user\r\n\r\n        users.map(x => {\r\n            if (x[\"username\"] == this.state.username){\r\n              user = x\r\n            }\r\n          }\r\n         )\r\n\r\n         console.log(user)\r\n\r\n        orders.map(x => {\r\n          // console.log(x[\"user\"])\r\n          if (x[\"user\"] == user[\"pk\"]){\r\n            \r\n              results.push(x)\r\n          }\r\n        })\r\n        console.log(results)\r\n\r\n\r\n\r\n        this.setState({\r\n          isLoaded: true,\r\n          orders: results\r\n        });\r\n      },\r\n      // Note: it's important to handle errors here\r\n      // instead of a catch() block so that we don't swallow\r\n      // exceptions from actual bugs in components.\r\n      (error) => {\r\n        this.setState({\r\n          isLoaded: true,\r\n          error\r\n        });\r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n  \r\n\r\n  render() {\r\n    console.log(this.state)\r\n    if (!this.state.userisLoaded){\r\n      this.handleUser()\r\n    }\r\n    console.log(this.state)\r\n    const {gotoFuncs} = this.props;\r\n    const {orders, isLoaded} = this.state;\r\n    return (\r\n      <div>\r\n        <h1 style={{ textAlign: 'center' }}>\r\n          Welcome to StopGap!\r\n        </h1>\r\n        <Link to='/form'>\r\n          <Button\r\n            className=\"newRequestButton\"\r\n            color=\"primary\" variant=\"contained\" size='large'\r\n            style={{ display: 'block', marginLeft: 'auto', marginRight: 'auto', marginTop: '10%' }}>\r\n            Create New Ramp Request\r\n          </Button>\r\n        </Link>\r\n        <br />\r\n        <br />\r\n        <ListingBox click={(data) => gotoFuncs.ramp_info(true,data)} orders={orders} isAdmin isLoaded={isLoaded}/>\r\n        {/* <ListingBox click={(id) => this.props.gotoFuncs.ramp_info(false,id)} /> */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ClientDashboard;\r\n"]},"metadata":{},"sourceType":"module"}