{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\owner\\\\Desktop\\\\team\\\\app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import ProgressBar from\"../ProgressBar\";import Button from\"@material-ui/core/Button\";import Grid from\"@material-ui/core/Grid\";import{Select,MenuItem,InputLabel}from\"@material-ui/core\";import{sizing}from'@material-ui/system';var StatusBlock=/*#__PURE__*/function(_React$Component){_inherits(StatusBlock,_React$Component);var _super=_createSuper(StatusBlock);function StatusBlock(props){var _this;_classCallCheck(this,StatusBlock);_this=_super.call(this,props);_this.handleStatusInput=function(e){_this.setState({statusInput:_this.statuses.indexOf(e.target.value)});};_this.saveData=function(e){e.preventDefault();// TODO: make post request\nvar status=_this.state.statusInput;_this.setState({status:status});};_this.statuses=[\"Request Recieved\",\"Request Accepted\",\"Build Phase\",\"Paint Phase\",\"Out for Delivery\",\"Completed\"];_this.statuses[-1]=\"--\";_this.state={error:null,isLoaded:false,date:\"\",statusInput:0,status:-1// progress: (0 / (this.statuses.length - 1)) * 100,\n};return _this;}_createClass(StatusBlock,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$setState;var new_progress=\"status\"in this.props.data?this.statuses.indexOf(this.props.data[\"status\"]):-1;if(new_progress>=this.statuses.length||new_progress<-1){new_progress=-1;}this.setState((_this$setState={status:this.props.data[\"status\"],date:this.props.data[\"date_created\"],isLoaded:true},_defineProperty(_this$setState,\"status\",new_progress),_defineProperty(_this$setState,\"statusInput\",new_progress),_this$setState));}},{key:\"render\",value:function render(){var _this$state=this.state,status=_this$state.status,statusInput=_this$state.statusInput,date=_this$state.date,error=_this$state.error,isLoaded=_this$state.isLoaded;var statusMsg=this.statuses[statusInput];var progress=statusInput/(this.statuses.length-1);if(error){return/*#__PURE__*/React.createElement(\"div\",null,\" Error: \",error.message);}else if(!isLoaded){return/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\");}else{var dirtyBit=statusInput!=status;return/*#__PURE__*/React.createElement(\"div\",{className:\"block\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"block-title\"},\"Status\"),/*#__PURE__*/React.createElement(\"span\",{className:\"status-block-last-updated\"},\"Initial Request Date: \",/*#__PURE__*/React.createElement(\"strong\",null,date)),/*#__PURE__*/React.createElement(ProgressBar,{progress:progress}),/*#__PURE__*/React.createElement(\"span\",{className:\"status-block-status\"},statusMsg,/*#__PURE__*/React.createElement(\"br\",null)),this.props.isAdmin&&/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,md:10},/*#__PURE__*/React.createElement(Select,{className:\"status-bar-textfield\",value:statusMsg,onChange:this.handleStatusInput,type:\"number\",variant:\"outlined\"},this.statuses.map(function(status,i){return/*#__PURE__*/React.createElement(MenuItem,{value:status,key:i},status);}))),/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",disabled:!dirtyBit,onClick:this.saveData},\"Save\"))));}}}]);return StatusBlock;}(React.Component);export default StatusBlock;","map":{"version":3,"sources":["C:/Users/owner/desktop/team/app/src/components/react-components/Dashboard/RampInfoPage/StatusBlock.js"],"names":["React","ProgressBar","Button","Grid","Select","MenuItem","InputLabel","sizing","StatusBlock","props","handleStatusInput","e","setState","statusInput","statuses","indexOf","target","value","saveData","preventDefault","status","state","error","isLoaded","date","new_progress","data","length","statusMsg","progress","message","dirtyBit","isAdmin","map","i","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ProgressBar from \"../ProgressBar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport {Select, MenuItem, InputLabel} from \"@material-ui/core\";\r\nimport { sizing } from '@material-ui/system';\r\n\r\nclass StatusBlock extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.statuses = [\r\n      \"Request Recieved\",\r\n      \"Request Accepted\",\r\n      \"Build Phase\",\r\n      \"Paint Phase\",\r\n      \"Out for Delivery\",\r\n      \"Completed\"\r\n    ];\r\n    this.statuses[-1] = \"--\"\r\n\r\n    this.state = {\r\n      error: null,\r\n      isLoaded: false,\r\n      date:\"\",\r\n      statusInput: 0,\r\n      status: -1\r\n      // progress: (0 / (this.statuses.length - 1)) * 100,\r\n    };\r\n  }  \r\n\r\n  handleStatusInput = e => {\r\n    this.setState({\r\n      statusInput: this.statuses.indexOf(e.target.value)\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    let new_progress = \"status\" in this.props.data ? this.statuses.indexOf(this.props.data[\"status\"]) : -1\r\n    if (new_progress >= this.statuses.length || new_progress < -1){\r\n      new_progress = -1;\r\n    }\r\n    this.setState({\r\n      status: this.props.data[\"status\"],\r\n      date: this.props.data[\"date_created\"],\r\n      isLoaded: true,\r\n      status: new_progress,\r\n      statusInput: new_progress\r\n    });\r\n  }\r\n\r\n  saveData = e => {\r\n    e.preventDefault();\r\n    // TODO: make post request\r\n    const status = this.state.statusInput;\r\n    this.setState({\r\n      status\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { status, statusInput, date, error, isLoaded } = this.state;\r\n    const statusMsg = this.statuses[statusInput];\r\n    const progress = (statusInput / (this.statuses.length - 1));\r\n    if (error) {\r\n      return <div> Error: {error.message}</div>\r\n    }\r\n    else if (!isLoaded) {\r\n      return <div>Loading...</div>\r\n    }\r\n    else{\r\n\r\n    const dirtyBit = statusInput != status;\r\n\r\n    return (\r\n      <div className={\"block\"}>\r\n        <h2 className={\"block-title\"}>\r\n          Status\r\n        </h2>\r\n        <span className={\"status-block-last-updated\"}>\r\n          Initial Request Date: <strong>\r\n            {date}\r\n          </strong>\r\n        </span>\r\n        <ProgressBar progress={progress} />\r\n        <span className={\"status-block-status\"} > \r\n          {statusMsg}\r\n          <br/>\r\n        </span>\r\n        { this.props.isAdmin &&\r\n          <Grid container>\r\n            <Grid item md={10}>\r\n              <Select\r\n                className = {\"status-bar-textfield\"}\r\n                value={statusMsg}\r\n                onChange={this.handleStatusInput}\r\n                type=\"number\"\r\n                variant=\"outlined\"\r\n              >\r\n                {this.statuses.map((status, i) => <MenuItem value={status} key={i}>{status}</MenuItem>)}\r\n                \r\n              </Select>\r\n            </Grid>\r\n\r\n            <Grid item md={2}>\r\n              <Button fullWidth variant=\"contained\" color=\"primary\" disabled={!dirtyBit} onClick={this.saveData}>Save</Button>\r\n            </Grid>\r\n          </Grid>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n}\r\n\r\nexport default StatusBlock;"]},"metadata":{},"sourceType":"module"}